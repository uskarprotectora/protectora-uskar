<!-- Modal Formulario de Adopci칩n -->
<div class="modal-overlay" id="adoptionFormModal">
    <div class="modal modal-xlarge">
        <div class="modal-header">
            <h2 class="modal-title">Formulario de Adopci칩n</h2>
            <button class="modal-close" id="closeAdoptionFormModal">&times;</button>
        </div>
        <form id="adoptionForm" class="adoption-form-content" novalidate>
            <input type="hidden" id="adoptionPetId">
            <input type="hidden" id="adoptionPetName">

            <div class="form-section-header">
                <h3>Animal de inter칠s</h3>
            </div>
            <div class="pet-interest-display" id="petInterestDisplay">
                <!-- Se rellena din치micamente -->
            </div>
            <div class="form-group">
                <label class="form-label">Nombre del animal que te interesa *</label>
                <input type="text" class="form-input" id="adoptPetNameInput" placeholder="Escribe el nombre del animal..." required>
            </div>

            <div class="form-section-header">
                <h3>V칤deo de presentaci칩n</h3>
            </div>
            <div class="form-group">
                <label class="form-label">Gr치bate un v칤deo present치ndote (opcional)</label>
                <div class="file-upload-area" id="adoptVideoUploadArea">
                    <input type="file" id="adoptPresentationVideo" accept="video/*" class="file-input">
                    <div class="file-upload-content">
                        <span class="file-upload-icon">游꿟</span>
                        <span>Arrastra tu v칤deo aqu칤 o haz clic para seleccionar</span>
                        <span class="file-upload-hint">M치ximo 30MB (MP4, MOV)</span>
                    </div>
                </div>
                <div class="adopt-video-preview" id="adoptVideoPreview"></div>
            </div>

            <div class="form-section-header">
                <h3>Datos personales</h3>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Nombre completo *</label>
                    <input type="text" class="form-input" id="adoptFullName" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Fecha de nacimiento *</label>
                    <input type="date" class="form-input" id="adoptBirthDate" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Correo electr칩nico *</label>
                    <input type="email" class="form-input" id="adoptEmail" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Tel칠fono *</label>
                    <input type="tel" class="form-input" id="adoptPhone" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Profesi칩n *</label>
                    <input type="text" class="form-input" id="adoptProfession" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Ciudad *</label>
                    <input type="text" class="form-input" id="adoptCity" required>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Direcci칩n completa *</label>
                <input type="text" class="form-input" id="adoptAddress" required>
            </div>

            <div class="form-section-header">
                <h3>Vivienda</h3>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Tipo de vivienda *</label>
                    <select class="form-input" id="adoptHousingType" required>
                        <option value="">Seleccionar</option>
                        <option value="piso">Piso</option>
                        <option value="casa">Casa</option>
                        <option value="chalet">Chalet</option>
                        <option value="otro">Otro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Propietario o alquiler *</label>
                    <select class="form-input" id="adoptOwnerOrRenter" required>
                        <option value="">Seleccionar</option>
                        <option value="propietario">Propietario</option>
                        <option value="alquiler">Alquiler</option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="adoptHasGarden">
                        <span>Tengo jard칤n o terraza</span>
                    </label>
                </div>
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="adoptLandlordAllows" checked>
                        <span>El propietario permite mascotas (si alquiler)</span>
                    </label>
                </div>
            </div>

            <div class="form-section-header">
                <h3>Convivencia familiar</h3>
            </div>
            <div class="form-group">
                <label class="form-label">쮺on qu칠 miembros de la familia vivir치 el animal? *</label>
                <textarea class="form-input form-textarea" id="adoptFamilyMembers" rows="3" required placeholder="Indica qui칠nes viven en casa, sus edades y relaci칩n (ej: pareja 35 a침os, hijo 8 a침os, abuela 70 a침os...)"></textarea>
            </div>
            <div class="form-group checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="adoptAllAgree" required>
                    <span>Todos los miembros del hogar est치n de acuerdo con la adopci칩n *</span>
                </label>
            </div>

            <div class="form-section-header">
                <h3>Experiencia con animales</h3>
            </div>
            <div class="form-group checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="adoptHasOtherPets">
                    <span>Tengo otras mascotas actualmente</span>
                </label>
            </div>
            <div class="form-group" id="otherPetsGroup" style="display: none;">
                <label class="form-label">Describe tus mascotas actuales</label>
                <textarea class="form-input form-textarea" id="adoptOtherPetsDesc" rows="2" placeholder="Tipo, raza, edad, car치cter..."></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Experiencia previa con animales</label>
                <textarea class="form-input form-textarea" id="adoptPreviousExperience" rows="2" placeholder="Cu칠ntanos si has tenido mascotas antes..."></textarea>
            </div>

            <div class="form-section-header">
                <h3>Sobre la adopci칩n</h3>
            </div>
            <div class="form-group">
                <label class="form-label">쯇or qu칠 quieres adoptar? *</label>
                <textarea class="form-input form-textarea" id="adoptWhyAdopt" rows="3" required placeholder="Cu칠ntanos tus motivaciones..."></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Horas que estar치 solo el animal al d칤a *</label>
                <input type="number" class="form-input" id="adoptHoursAlone" min="0" max="24" required>
            </div>
            <div class="form-group checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="adoptCommitment" required>
                    <span>Entiendo que adoptar es un compromiso de por vida y me hago responsable *</span>
                </label>
            </div>

            <div class="form-section-header">
                <h3>Verificaci칩n de seguridad</h3>
            </div>
            <div class="captcha-container">
                <p class="captcha-instructions">Para verificar que no eres un robot, responde a las siguientes preguntas:</p>
                <div class="captcha-questions">
                    <div class="captcha-question-item">
                        <span id="captchaQuestion1">Cargando...</span>
                        <input type="number" class="form-input captcha-input" id="captchaAnswer1" required placeholder="Respuesta">
                    </div>
                    <div class="captcha-question-item">
                        <span id="captchaQuestion2">Cargando...</span>
                        <input type="text" class="form-input captcha-input" id="captchaAnswer2" required placeholder="Respuesta">
                    </div>
                    <div class="captcha-question-item">
                        <span id="captchaQuestion3">Cargando...</span>
                        <input type="number" class="form-input captcha-input" id="captchaAnswer3" required placeholder="Respuesta">
                    </div>
                </div>
                <button type="button" class="btn btn-secondary btn-small" onclick="generateCaptcha()" title="Nuevas preguntas">Cambiar preguntas</button>
            </div>

            <div class="form-section-header">
                <h3>Protecci칩n de datos y consentimientos</h3>
            </div>
            <div class="legal-clauses">
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="adoptDataProtection" required>
                        <span>He le칤do y acepto la <a href="#" onclick="openPrivacyPolicy(event)">pol칤tica de protecci칩n de datos</a>. Autorizo el tratamiento de mis datos personales con la finalidad de gestionar mi solicitud de adopci칩n. *</span>
                    </label>
                </div>
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="adoptFollowUpConsent" required>
                        <span>Doy mi consentimiento para que la protectora realice un seguimiento del animal adoptado y conserve mis datos para dicho fin. *</span>
                    </label>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="cancelAdoptionBtn">Cancelar</button>
                <button type="submit" class="btn btn-primary">Enviar solicitud</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal de errores de validaci칩n -->
<div class="modal-overlay" id="validationErrorModal">
    <div class="modal modal-small">
        <div class="modal-header">
            <h2 class="modal-title">Campos incompletos</h2>
            <button class="modal-close" onclick="closeValidationErrorModal()">&times;</button>
        </div>
        <div class="validation-error-content">
            <p>Por favor, completa los siguientes campos obligatorios:</p>
            <ul id="validationErrorList"></ul>
            <div class="form-actions">
                <button type="button" class="btn btn-primary" onclick="closeValidationErrorModal()">Entendido</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de pol칤tica de privacidad -->
<div class="modal-overlay" id="privacyPolicyModal">
    <div class="modal">
        <div class="modal-header">
            <h2 class="modal-title">Pol칤tica de Protecci칩n de Datos</h2>
            <button class="modal-close" onclick="closePrivacyPolicy()">&times;</button>
        </div>
        <div class="privacy-policy-content">
            <h4>Responsable del tratamiento</h4>
            <p>Protectora de Animales Uskar</p>

            <h4>Finalidad del tratamiento</h4>
            <p>Los datos personales recogidos ser치n tratados con la finalidad de gestionar las solicitudes de adopci칩n, realizar el seguimiento de los animales adoptados y mantener el contacto con los adoptantes.</p>

            <h4>Legitimaci칩n</h4>
            <p>La base legal para el tratamiento de sus datos es el consentimiento del interesado.</p>

            <h4>Destinatarios</h4>
            <p>No se ceder치n datos a terceros, salvo obligaci칩n legal.</p>

            <h4>Derechos</h4>
            <p>Puede ejercer sus derechos de acceso, rectificaci칩n, supresi칩n, limitaci칩n, portabilidad y oposici칩n enviando un correo a uskar.protectora@gmail.com</p>

            <h4>Conservaci칩n</h4>
            <p>Los datos se conservar치n mientras sea necesario para la finalidad del tratamiento y durante los plazos legales aplicables.</p>

            <div class="form-actions">
                <button type="button" class="btn btn-primary" onclick="closePrivacyPolicy()">Cerrar</button>
            </div>
        </div>
    </div>
</div>
